<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.webmanifest?v=6.5">
<link rel="apple-touch-icon" href="icons/apple-touch-icon.png?v=6.5">
<link rel="icon" href="favicon.png?v=6.5">
<meta name="theme-color" content="#0f1115">
<title>Album Rater</title>
<style>
:root{--c10:#2e47ee;--c9:#0285c6;--c8:#02aec6;--c7:#23be32;--c6:#f0ca15;--c5:#e12928;--bg:#0f1115;--panel:#161a22;--ink:#e9edf1;--muted:#aeb5c0;--line:#2a3140;--neutral:#2a3140}
*{box-sizing:border-box}html,body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif;margin:0}
.wrap{max-width:1100px;margin:18px auto;padding:0 16px 64px}
h1{font-size:20px;margin:0 0 6px}.sub{color:var(--muted);font-size:13px;margin-bottom:12px}
.toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:10px}
.select,input,select,button{background:#0e1218;border:1px solid var(--line);color:var(--ink);padding:10px;border-radius:10px}
button{cursor:pointer;font-weight:600}.card{background:var(--panel);border:1px solid var(--line);border-radius:14px}.pad{padding:14px}
.grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}@media (max-width:900px){.grid{grid-template-columns:1fr}}
.pair{display:grid;grid-template-columns:140px 1fr;gap:8px;align-items:center;margin-bottom:8px}.label{font-size:13px;color:var(--muted)}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 10px}
.row{display:grid;grid-template-columns:60px 90px 1fr 160px 90px;gap:8px;align-items:center;margin-bottom:6px}
.pill{display:inline-flex;justify-content:center;align-items:center;padding:6px 10px;border-radius:8px;color:white;font-weight:800;min-width:52px;text-align:center}
.cover{width:100%;aspect-ratio:1/1;object-fit:cover;border:1px solid var(--line);border-radius:10px;background:#0d1117}
table{width:100%;border-collapse:collapse;margin-top:8px}th,td{border-bottom:1px solid var(--line);padding:8px 6px;text-align:left;font-size:14px}th{color:var(--muted);font-weight:600}
.final{font-size:52px;font-weight:800;text-align:center;margin-top:10px}
canvas{width:100%;height:320px;border:1px solid var(--line);border-radius:12px;background:#0e1218}
.footer{margin-top:10px;font-size:12px;color:#93a0b6}
.badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#c9d3e3}
.badge-dot{width:8px;height:8px;border-radius:999px;background:var(--neutral);display:inline-block}
</style>
</head>
<body>
<div class="wrap">
  <div class="toolbar">
    <h1 style="margin-right:auto">Album Rater</h1>
    <select id="lang" class="select"><option value="en">English</option><option value="es">Español</option></select>
    <button id="exportJSON">Export Data</button>
    <label style="position:relative"><span id="importLabel" style="padding:10px 12px;border:1px solid var(--line);border-radius:10px;cursor:pointer;display:inline-block">Import Data</span>
      <input id="importJSON" type="file" accept="application/json" style="position:absolute;inset:0;opacity:0;cursor:pointer"></label>
    <button id="clearAll">Clear All Data</button>
    <button id="sortTop10">Sort Top 10</button>
    <button id="exportStory">Export Story (1080×1920)</button>
    <button id="export45">Export 4:5 (1080×1350)</button>
  </div>
  <div class="sub" id="subtitle"></div>

  <div class="grid">
    <div class="card pad">
      <div class="pair"><div class="label" data-i18n="album">Album</div>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="album" placeholder="Album name">
          <button id="btnBuscarAlbum" type="button">Buscar info</button>
        </div>
      </div>
      <div class="pair"><div class="label" data-i18n="artist">Artist</div><input id="artist" placeholder="Artist"></div>
      <div class="pair"><div class="label" data-i18n="released">Release Date</div><input id="released" placeholder="Aug 1, 2025"></div>
      <div class="pair"><div class="label" data-i18n="rankedby">Ranked by</div><input id="rankedby" placeholder="Your name or alias"></div>
      <div class="pair"><div class="label" data-i18n="cover">Cover</div><input id="cover" type="file" accept="image/*"></div>
      <div class="pair"><div class="label" data-i18n="trackcount">Tracks</div><input id="trackcount" type="number" min="1" value="7"></div>
      <div class="controls">
        <button id="applyCount">Apply Track Count</button>
        <button id="addRow">+ Add Row</button>
        <button id="delRow">– Remove Last</button>
        <span class="badge" title="Unscored tracks are '-'">
          <span class="badge-dot"></span>
          Unscored = '-'
        </span>
      </div>
      <div class="row" style="font-size:12px;color:#aeb5c0">
        <div data-i18n="num">#</div><div data-i18n="duration">Duration</div><div data-i18n="name">Name</div><div data-i18n="score">Score (int + decimal)</div><div data-i18n="color">Color</div>
      </div>
      <div id="tracks"></div>
    </div>

    <div class="card pad">
      <div style="display:grid;grid-template-columns:1fr 360px;gap:16px">
        <div>
          <div style="display:grid;grid-template-columns:auto 1fr;column-gap:12px;row-gap:6px;align-items:center" id="info"></div>
          <table id="table"></table>
        </div>
        <div>
          <img id="coverOut" class="cover" alt="Cover">
          <div class="final" id="finalScore">—</div>
        </div>
      </div>
      <div style="margin-top:12px"><div style="font-size:12px;color:#aeb5c0;margin:6px 0">Enjoyment Timeline</div><canvas id="chart" width="900" height="360"></canvas></div>
      <div class="footer">Created by Ok Pretty Boy with help from ChatGPT</div>
    </div>
  </div>
</div>

<script defer src="autofillAlbum.v6.5.js?v=6.5"></script>
<script defer src="ui.v6.5.js?v=6.5"></script>
<script defer src="exportGlass.v6.5.js?v=6.5"></script>
<script defer src="sw-register.v6.5.js"></script>
</body>
</html>
